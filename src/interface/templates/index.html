{% load filters %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="/static/css/main.css" />
    <link type="text/css" rel="stylesheet" href="/static/css/mobile.css" />
    <link type="text/css" rel="stylesheet" href="/static/css/all-fa.css" />
    <title>pyShelf E-Book Server</title>
    <link href="https://fonts.googleapis.com/css2?family=Gruppo&family=Montserrat&family=Ubuntu&display=swap" rel="stylesheet">
    <script src="/static/js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="/static/js/pyshelf_ux.js" type="text/javascript"></script>
    <script type="text/javascript">
        var collections={{ CollectionObject|safe }};
    </script>
</head>

<body>
	<input type="hidden" id="_set" name="_set" value="{{ Set }}" />
    <div id="app">
        <ul id="shelf_nav">
            <div id="horiz_nav_hdr">
                <h1 class="app_hdr" id="hdr_branding">pyShelf {{Version}}</h1>
                <div class="hdr_nav" id="hdr_nav_center">
                    <input class="nav_search input_box" type="text" size="50" value="search by Title, Author, Tags, or Collections">
                    <div class="ui_btn_w_icon"><i class="fas fa-search search_submit search_button" onclick="window.location.href = '/prev_page/{{ Set }}'"></i>search</div>
                    <ul id="tab_nav_menu">
                        <li class="nav_menu_tab active_tab"><i class="fas fa-home"></i>&nbsp;Home</li>
                        <li class="nav_menu_tab"><i class="fas fa-layer-group"></i>&nbsp;Collections</li>
                        <li class="nav_menu_tab"><i class="fas fa-star"></i>&nbsp;Favorites</li>
                        <li class="nav_menu_tab"><i class="fas fa-question-circle"></i>&nbsp;Help</li>
                        <li class="nav_menu_tab"><i class="fas fa-bug"></i>&nbsp;Bug report</li>
                </div>
                <div class="hdr_nav" id="hdr_nav_right">
                    <i class="fas fa-user ui_icon_notxt"></i>
                    <input id="username" class="nav_login input_box" type="text" size="8" value="Username">
                    <input id="password" class="nav_login input_box" type="text" size="8" value="Password">
                </div>
            </div>
            <div id="horiz_nav_main">
                <!--<i class="fas fa-chevron-left nav_icon prev_page" onclick="window.location.href = '/prev_page/{{ Set }}'"></i>-->
                {{ BookStats }} books | <script type="text/javascript">document.write(collections.length)</script> collections
                <!--<i class="fas fa-chevron-right nav_icon next_page" onclick="window.location.href = '/next_page/{{ Set }}'"></i>-->
                <!--<input class="nav_button search_submit" type="submit" value="Search">-->
            </div>
        </ul>
        <div class="app_body">
            <div class="nav_l">
                <p class="popover"></p>
                <ul id="vert-nav">
                    <li class="vert-nav-item nav_l_hdr">
                        <h1 class="app_hdr">pyShelf {{Version}}</h1>
                    </li>
                    <li class="vert-nav-item nav_l_hdr">
                        <input class="nav_search" type="text" size="10" value="">
                    </li>
                    <li class="vert-nav-item nav_l_hdr btn" id="btn_collections">Collections</li>
                    <ul class="hidden vert-nav collections">
                    {% for row in LeftNavCollections %}
                        <a href="{% url 'show_collection' _collection=row.link _colset=Set%}" class="nav_link" alt="{{row.link}}">
                            <li class="nav_l_{{row.class}} btn">
                                {{ row.string }}
                            </li>
                        </a>
                    {% endfor %}
                    </ul>
                    <ul class="vert-nav dynnav">
                        {% if LeftNavMenu0 %}
                            {% for row in LeftNavMenu0 %}
                                <a href="{{ row.link }}"><li class="vert-nav-item nav_l_hdr btn">{{ row.title }}</li></a>
                            {% endfor %}
                        {% endif %}
                    </ul>
                    <li class="vert-nav-item nav_l_hdr btn" id="btn_pyshelf">pyshelf.com</li>
                    <a href="irc://freenode.net/pyshelf" class="web_footer_link"><li class="vert-nav-item nav_l_hdr" id="btn_discord">discord</li></a>
                    <li class="vert-nav-item nav_l_hdr btn" id="btn_github">github</li>
                    <li class="vert-nav-item nav_l_hdr btn" id="btn_irc">irc</li>
                </ul>
            </div>
            <div class="shelf">
                <div class="shelf_contents">
                    <ul id="book_shelf">
                        {% for book in Books %}
                            <li class="shelf_item">
                                <img alt="cover missing" src="data:image;base64,{{ book.cover | bin_2_img }}" class="book_thumb" onerror="this.src='/static/img/pysBook.png'"/>
                                <ul class="book_details_list">
                                    <li class="book_title">{{ book.title }}</li>
                                    <li class="book_author">{{ book.author }}</li>
                                        {% if book.description|length >= 225 %}
                                            {% make_description_obj book.description as descr_obj %}
                                                <li class="book_description">{{ descr_obj }}</li>
                                        {% elif book.description == None %}
                                            <li class="book_description">
                                                <div class="inline_sys_message">
                                                    We were unable to find a description in this books metadata.
                                                    <br />Have some <i class="fas fa-drumstick-bite"></i> instead?
                                                </div>
                                            </li>
                                        {% else %}
                                            <li class="book_description">{{ book.description }}</li>
                                        {% endif %}
                                    <li class="book_tags">Tags: {{ book.tags }}</li>
                                    <li class="book_controls">

                                            <span class="favorite-button controls">
                                               <a href="{% url 'favorite' pk=book.pk %}" class="book_link"><i class="fas fa-thumbs-up icon"></i></a>
                                            </span>


                                            <span class="download-button controls">
                                                <a href="{% url 'download' pk=book.pk %}" class="book_link"><i class="fas fa-book icon"></i></a>
                                            </span>


                                            <span class="share-button controls">
                                                <a href="{% url 'share' pk=book.pk %}" class="book_link"><i class="fas fa-share icon"></i></a>
                                            </span>

                                            <span class="info-button controls">
                                                <a href="{% url 'info' pk=book.pk %}" class="book_link"><i class="fas fa-info icon"></i></a>
                                            </span>

                                    </li>
                                </ul>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
